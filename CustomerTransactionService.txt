
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import java.util.List;
import java.util.Optional;

@Service
public class CustomerTransactionService {

    @Autowired
    private CustomerTransactionRepository transactionRepository;

    public List<CustomerTransaction> getAllTransactions() {
        return transactionRepository.findAll();
    }

    public List<CustomerTransaction> getTransactionsByCustomerId(Long customerId) {
        return transactionRepository.findByCustomerId(customerId);
    }

    public Optional<CustomerTransaction> getTransactionById(Long transactionId) {
        return transactionRepository.findById(transactionId);
    }

    public CustomerTransaction addTransaction(CustomerTransaction transaction) {
        return transactionRepository.save(transaction);
    }

    public CustomerTransaction updateTransaction(Long transactionId, CustomerTransaction updatedTransaction) {
        Optional<CustomerTransaction> transaction = transactionRepository.findById(transactionId);
        if (transaction.isPresent()) {
            CustomerTransaction existingTransaction = transaction.get();
            // Update necessary fields
            existingTransaction.setAmount(updatedTransaction.getAmount());
            existingTransaction.setSpentDetails(updatedTransaction.getSpentDetails());
            return transactionRepository.save(existingTransaction);
        } else {
            throw new RuntimeException("Transaction not found");
        }
    }

    public void deleteTransaction(Long transactionId) {
        transactionRepository.deleteById(transactionId);
    }
}
